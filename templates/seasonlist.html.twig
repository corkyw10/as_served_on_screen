{% extends 'jumbo.html.twig' %}

 {% block display %}<h1 class="display-3">{{ tvShow.title }}</h1>{% endblock %} 

{% block content %}

    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <img src="{{ asset('assets/images/'~tvShow.imageUrl) }}" class="img-fluid" alt="Responsive image">
            </div>

            <div class="col-md-6">
                <p>{{ tvShow.description }}</p>
                <p id="test"></p>
                <div class="row">
                    <select class="custom-select">
                        <option selected>Choose Season</option>
                        {% for season in seasons %}
                            <option class="season-selector" value="{{ season.id }}">{{ season.seasonTitle }}</option>
                            {# ajax request to fetch episodes and populate episode list #}
                        {% endfor %}
                    </select>
                    <select class="custom-select select-episodes">
                        <option selected>Choose Episode</option>
                            {# To be populated with Ajax #}
                    </select>
                </div>
            </div>        
        </div>    
    </div> 

                        {# <h2>There haven't been any seasons added yet, we're working on it though, check again soon!</h2> #}

{% endblock %}

{% block javascripts %}
    <script>
        $('.season-selector').click(function() {
            var seasonId = $(this).attr('value');
            $.ajax({
                url: 'http://asservedonscreen.test/jsonresponse',
                method: "GET",
                data: {'seasonId': seasonId},
            })
            .done(function(data) {
                for (var i=0; i<data['result'].length; i++) {
                    var title = data['result'][i]['title'];
                    $(".select-episodes").append("<option class=\"epsiode-selector\" value=\"\">" + title + "</option>"); 
                }
            })
        });
    </script>
{% endblock %}